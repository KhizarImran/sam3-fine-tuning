# @package _global_
defaults:
  - roboflow_v100/roboflow_v100_full_ft_100_images
  - _self_

# Override paths for fuse cutout dataset
paths:
  roboflow_vl_100_root: "sam3_datasets"
  experiment_log_dir: "experiments/fuse_cutout"
  bpe_path: "sam3/sam3/assets/bpe_simple_vocab_16e6.txt.gz"

# Override dataset configuration
roboflow_train:
  num_images: null  # Use all available images (we have 3 training images)
  supercategory: "fuse-cutout"  # Our dataset name

# Override launcher settings for single GPU
launcher:
  num_nodes: 1
  gpus_per_node: 1

# Override training hyperparameters
scratch:
  max_epochs: 30
  batch_size: 1
  resolution: 672  # Reduced from 1008 to save memory
  num_train_workers: 2  # Reduced from 10 (system recommends max 4)
  num_val_workers: 0  # No workers for validation
  gradient_accumulation_steps: 2  # Accumulate gradients to simulate batch_size=2

# Seed for reproducibility
seed: 42

# Override validation dataset to use 'valid' instead of 'test'
trainer:
  gradient_accumulation_steps: 2  # Match scratch setting
  data:
    val:
      dataset:
        img_folder: ${paths.roboflow_vl_100_root}/${roboflow_train.supercategory}/valid/
        ann_file: ${paths.roboflow_vl_100_root}/${roboflow_train.supercategory}/valid/_annotations.coco.json
